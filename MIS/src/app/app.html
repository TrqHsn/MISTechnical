<div class="container">
  <!-- Title Section with Floating Background -->
  <div class="title-card">
    <h1 class="title">MIS Technical Team</h1>
    <!-- Work Timer (7:30 -> 16:30) -->
    <div class="work-timer" [attr.data-state]="timerState()">
      <div class="timer-label">{{ timerLabel() }}</div>
      <div class="timer-value">{{ timerValue() }}</div>
    </div>
  </div>

  <!-- Logo (top-left) -->
  <div class="global-logo" title="Sohid Usman">
    <img src="/SohidUsman.jpg" alt="Sohid Usman" />
  </div>

  <!-- Buttons Row (single-line) -->
  <div class="buttons-row">

    @for (button of buttons; track button.id) {
      <button 
        class="btn" 
        (click)="onTopButtonClick($event, button.id)"
        [routerLink]="button.id === 'print' ? '/print' : button.id === 'testapi' ? '/ad-tools' : button.id === 'oif' ? '/forms' : button.id === 'inventory' ? '/inventory' : button.id === 'network' ? '/network' : button.id === 'devicetool' ? '/device-tool' : button.id === 'kiosk' ? '/kiosk-admin' : button.id === 'newuser' ? '/device-assign' : button.id === 'links' ? '/important-links' : null"
        routerLinkActive="btn-active"
        [attr.data-id]="button.id">
        {{ button.name }}
      </button>
    }
  </div>

  <!-- Router Outlet for Components -->
  <div class="content-area">
    <router-outlet></router-outlet>
  </div>

  <!-- Unlock Results Modal -->
  @if (unlockDialogVisible()) {
  <div class="modal-overlay" (click)="closeUnlockDialog()">
    <div class="modal" (click)="$any($event).stopPropagation()">
      <button class="modal-close" (click)="closeUnlockDialog()">âœ•</button>

      <h1>Unlock AD Accounts</h1>

      @if (isUnlocking()) {
      <div class="modal-body">
        <div class="loading">Unlocking accounts...</div>
      </div>
      } @else {
      <div class="modal-body">
        <div class="results">
          <div class="result-col">
            <h2>Unlocked ({{ unlocked().length }})</h2>
            <ul>
              @for (u of unlocked(); track $index) {
              <li>{{ u }}</li>
              }
            </ul>
          </div>

          <div class="result-col">
            <h2>Failed ({{ failed().length }})</h2>
            <ul>
              @for (f of failed(); track $index) {
              <li><strong>{{ f.samAccountName }}</strong>: {{ f.reason }}</li>
              }
            </ul>
          </div>
        </div>
      </div>
      }

      <div class="modal-actions">
        <button class="btn" (click)="closeUnlockDialog()">Close</button>
      </div>
    </div>
  </div>
  }
  <!-- Toast Notifications -->
  <app-toast></app-toast>